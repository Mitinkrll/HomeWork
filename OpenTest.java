import RequestClient.Java11HttpClientOpen;
import io.qameta.allure.*;
import model.RequestToDB;
import model.RequestToDBPut;
import model.ResponseDB;
import org.testng.annotations.Test;

import static org.testng.Assert.assertEquals;
@Epic("Intagration Tests")

public class OpenTest extends Java11HttpClientOpen {
    @Test(description = "GetAllUser")
    @Severity(SeverityLevel.CRITICAL)
    @Description("Status code 200")
    public void FirstTest() throws Exception {
        int response;
        Java11HttpClientOpen obj = new Java11HttpClientOpen();
        response = obj.sendGet();
        assertEquals(response,200);
    }
    @Test(description = "Cоздание пользователя")
    @Severity(SeverityLevel.BLOCKER)
    @Description("Status code 200")
    public void SecondTest() throws Exception{
        ResponseDB response;
        Java11HttpClientOpen obj = new Java11HttpClientOpen();
        RequestToDB body = new RequestToDB("dolore","Nick Name","mail@mail.ru","1946-08-20");
        response = obj.sendPost(body.toString());
        assertEquals(response.getEmail() ,"mail@mail.ru");
    }
    @Test(description = "Апдейт пользователя")
    @Severity(SeverityLevel.CRITICAL)
    @Description("Update User")
    public void UpdateUserTest() throws Exception{
        ResponseDB response;
        Java11HttpClientOpen obj = new Java11HttpClientOpen();
        RequestToDBPut body = new RequestToDBPut("common","Update User","1","mail@mail.ru","2000-08-20");
        response = obj.sendPut(body.toString());
        assertEquals(response.getName() ,"Update User");

    }
    @Test(description = "Get Friends")
    @Severity(SeverityLevel.NORMAL)
    @Description("Status Code 500")
    public void GetFriendsTest() throws  Exception{
        int response;
        Java11HttpClientOpen obj = new Java11HttpClientOpen();
        response = obj.sendGetFriends();
        assertEquals(response,500);
    }



}
